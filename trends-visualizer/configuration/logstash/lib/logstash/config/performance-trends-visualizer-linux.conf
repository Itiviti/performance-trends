input {
  file {
    path => ["/apps/performance-trends-visualizer/loginput/*.log"]
    type => "performance-trend"
    start_position => "beginning"
  }
}

filter {
  if [type] == "performance-trend" {
    grok {
	  patterns_dir => "./patterns"
	  match => [ "message", "%{SECTION1:pt_date_epoch}%{SEPARATOR}%{SECTION2:pt_package}%{SEPARATOR}%{SECTION3:pt_class}%{SEPARATOR}%{SECTION4:pt_method}%{SEPARATOR}%{SECTION5:pt_thread}%{SEPARATOR}%{LASTSECTION:pt_duration_micros:int}" ]
    }
  }
}

output {
  elasticsearch {
    host => "localhost"
    port => 9200
    index => "performance_trends_index"
    protocol => "http"
    manage_template => false
  }
}